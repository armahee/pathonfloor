<!DOCTYPE html>
<html>
<head>
	<title>AR Mahee Project</title>
	<style type="text/css">
		body {
			background-color: #000;
			margin: 0px;
		}
		#header {
			width: 100%;
		}
		#flr {
			width: 100%;
		}
		#srm {
			margin-left: 1%;
			width: 49%;
		}
		#erm {
			width: 49%;
		}
		#imgLoader {
			width: 500px;
		}
		.door {
			position: absolute;
			border-radius: 5px;
			background: red;
			width: 0px;
			height: 0px;
		}
		#rm7 {
			width: 5px;
			height: 5px;
			top: 527px;
			left: 270px;
		}
		#rm10 {
			width: 5px;
			height: 5px;
			top: 527px;
			left: 295px;
		}
		#rm18 {
			width: 5px;
			height: 5px;
			top: 527px;
			left: 430px;
		}

	</style>
</head>
<body>
<div id='header'>
	<select id='flr'><option selected="">0</option></select>
	<select id='srm' onchange="startRoom()">
		<option value=""></option>
		<option value="rm7">7</option>
		<option value="rm10">10</option>
	</select>
	<select id='erm'>
		<option value="rm18">18</option>
	</select>
</div>
<div id='bdy'>
	<div class="door" id="rm7"></div>
	<div class="door" id="rm10"></div>
	<div class="door" id="rm18"></div>
	<img id="imgLoader" position="absolute"  src="app-contents/img/0.jpg">
</div>
<script type="text/javascript">
	//document.getElementById("srm").addEventListener("change",startRoom,false);
	function sleep(ms) {
	  return new Promise(resolve => setTimeout(resolve, ms));
	}
	console.log('working');
	document.getElementById("rm7").style.width = "0px";
	document.getElementById("rm10").style.width = "0px";
	document.getElementById("rm18").style.width = "0px";
	var flg = 1;
	async function startRoom() {
		if(flg){
			document.getElementById('srm').remove(0);
			flg = 0;
		}
		document.getElementById("rm7").style.width = "0px";
		document.getElementById("rm10").style.width = "0px";
		//console.log('ar: '+document.getElementById(document.getElementById('srm').value).style.width);
		var i;
		var lim;
		if(document.getElementById('srm').value == "rm7"){
			lim = 170;
		}
		else{
			lim = 145;
		}
		for(i=1;i<lim;i++){
			document.getElementById(document.getElementById('srm').value).style.width = i.toString()+"px";
			await sleep(5);
		}
	}
</script>
<!--script src="app-contents/js/three.min.js"></script>
<script src="app-contents/js/controls/TrackballControls.js"></script>
<script type="text/javascript">
	var renderer, scene, camera;
	var line;
	var count = 0;
	var mouse = new THREE.Vector3();

	init();
	animate();

	function init() {

	  // info
	  var info = document.createElement('div');
	  info.style.position = 'absolute';
	  info.style.top = '30px';
	  info.style.width = '100%';
	  info.style.textAlign = 'center';
	  info.style.color = '#fff';
	  info.style.fontWeight = 'bold';
	  info.style.backgroundColor = 'transparent';
	  info.style.zIndex = '1';
	  info.style.fontFamily = 'Monospace';
	  info.innerHTML = "three.js - animated line using BufferGeometry";
	  //document.getElementById('bdy').appendChild(info);

	  // renderer
	  renderer = new THREE.WebGLRenderer();

	  renderer.setSize(window.innerWidth, window.innerHeight);
	  document.getElementById('bdy').appendChild(renderer.domElement);
	  

	  // scene
	  scene = new THREE.Scene();

	  // camera
	  camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 10000);
	  camera.position.set(0, 0, 1000);

	  // geometry
	  var geometry = new THREE.BufferGeometry();
	  var MAX_POINTS = 500;
	  positions = new Float32Array(MAX_POINTS * 3);
	  geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3));

	  // material
	  var material = new THREE.LineBasicMaterial({
	    color: 0xff0000,
	    linewidth: 2
	  });

	  // line
	  line = new THREE.Line(geometry, material);
	  scene.add(line);

	  document.addEventListener("mousemove", onMouseMove, false);
	  document.addEventListener('mousedown', onMouseDown, false);
	}

	// update line
	function updateLine() {
	  positions[count * 3 - 3] = mouse.x;
	  positions[count * 3 - 2] = mouse.y;
	  positions[count * 3 - 1] = mouse.z;
	  line.geometry.attributes.position.needsUpdate = true;
	}

	// mouse move handler
	function onMouseMove(event) {
	  mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
	  mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
	  mouse.z = 0;
	  mouse.unproject(camera);
	  if( count !== 0 ){
	  	updateLine();
	  }
	}

	// add point
	function addPoint(event){
	  console.log("point nr " + count + ": " + mouse.x + " " + mouse.y + " " + mouse.z);
	  positions[count * 3 + 0] = mouse.x;
	  positions[count * 3 + 1] = mouse.y;
	  positions[count * 3 + 2] = mouse.z;
	  count++;
	  line.geometry.setDrawRange(0, count);
	  updateLine();
	}

	// mouse down handler
	function onMouseDown(evt) {
	  // on first click add an extra point
	  if( count === 0 ){
	      addPoint();
	  }
	  addPoint();
	}

	// render
	function render() {
	  renderer.render(scene, camera);
	}

	// animate
	function animate() {
	  requestAnimationFrame(animate);
	  render();
	}

</script-->

</body>
</html>